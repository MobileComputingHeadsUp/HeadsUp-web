<div class="container">

  <div class="row">
    <div class="col s12">
      <ul class="tabs">
        <li class="tab col s4"><a href="#editspace">Edit Space</a></li>
        <li class="tab col s4"><a href="#announcements">Announcements</a></li>
        <li class="tab col s4"><a href="#ads">Advertisements</a></li>
      </ul>
    </div>


<!-- edit space tab -->
    <div id="editspace" class="col s12">
        <form class="thing-form">
          <div class="input-group">
            <div class="row">
              <h5>Basic Space Info</h5>
              <label style="display: block; margin-bottom: 1.0rem">
                Update Basic information about your space
              </label>
              <label for="space-name">Space Name</label>
              <input type="text" id="space-name" placeholder="New space's name" ng-model="sm.currentSpace.name">
              <label for="space-desc">Space Description</label>
              <input type="text" id="space-desc" placeholder="New space's description" ng-model="sm.currentSpace.description">
              <h5>Beacons</h5>
              <ul class="collection">
                <li class="collection-item clearfix" ng-repeat="bcn in sm.currentSpace.beacons" ng-hide="an.deleted">
                  <div>
                    {{bcn.name}}
                    <a href="#" ng-click="sm.currentSpace.beacons.splice($index,1)" class="secondary-content"><i class="material-icons">delete</i></a>
                  </div>
                </li>
              </ul>
              <div class = "row" ng-repeat="beacon in sm.newBeacons">
                <div class = "col s11">
                  <label for="space-beacon">Beacon Name</label>
                  <input type="text" id="space-beacon"  placeholder="New beacon name" ng-model="beacon.name" required>
                  <label for="space-beacon">Beacon Identifier</label>
                  <input type="text" id="space-beacon"  placeholder="New beacon identifier" ng-model="beacon.identifier" required>
                </div>
                <div class = "col s1">
                  <a class="btn-floating btn-large waves-effect waves-light red" ng-click="sm.deleteBeacon(beacon)"><i class="material-icons">close</i></a>
                </div>
              </div>
              <div class="row right-align">
                <a class="btn-floating btn-large waves-effect waves-light red" ng-click="sm.addBeacon()"><i class="material-icons">add</i></a>
              </div>
            </div>

            <!--

            <p class="input-group">
            <h5>Information You'd Like Your Patrons to Provide Upon Profile creation</h5>
            <label style="display: block; margin-bottom: 1.0rem">
              This information will tailor your patrons experience to your Space. Choose wisely!
            </label>

            <div ng-repeat="dropdown in sm.currentSpace.requriedUserInfo.dropdown" class="row">

              <div class="input-field col s11" ng-hide="dropdown.editable">
                <select class="browser-default">
                  <option value="" disabled selected>{{dropdown.label}}</option>
                  <option ng-repeat="option in dropdown.optionStrings" value="{{option.number}}">{{option.value}}</option>
                </select>
              </div>

              <a ng-hide="dropdown.editable" class="btn-floating btn-large waves-effect waves-light red right" ng-click="sm.setDropdownEditable(dropdown)"><i class="material-icons">mode_edit</i></a>
              <div class="col s11 input-field" ng-show="dropdown.editable">
                <input type="text" id="dd-title" ng-model="dropdown.label" placeholder="Enter a title for this dropdown">
                <label class="active" for="dd-title">Dropdown Title</label>
                <div class="input-field" ng-repeat="option in dropdown.optionStrings track by $index">
                  <input type="text"  id="UNIQUE{{$index}}" ng-model="option.value" placeholder="Fill in this drop down option">
                  <label class="active" for="UNIQUE{{$index}}">Option #{{$index + 1}}</label>
                </div>
                <a class="btn-floating btn-large waves-effect waves-light red right" ng-click="sm.newDropDownOption(dropdown)"><i class="material-icons">add</i></a>
              </div>

              <a ng-show="dropdown.editable" class="btn-floating btn-large waves-effect waves-light red right" ng-click="sm.saveDropdown(dropdown)"><i class="material-icons">done</i></a>
            </div>


            <a id="dropDownButton" class="waves-effect waves-light btn deep-purple" ng-click="sm.newDropDown()">New Drop Down Option</a>
            </p>
            <!-- Save the new space button: end of form -->

            <p class="input-group">
            <div class="input-group-btn">
              <button type="submit" class="btn btn-primary" ng-click="sm.saveSpace()">Save</button>
            </div>
            </p>
        </form>
    </div>
    </div>

  <!-- Announcements tab -->
    <div id="announcements" class="col s12">
      <form class="thing-form">
        <div class="input-group">
          <div class="row">
            <h5>Current Pending Announcements</h5>
            <ul class="collection">
              <li class="collection-item clearfix" ng-repeat="an in sm.currentSpace.announcments" ng-hide="an.deleted">
                <div>
                  {{an.text}}
                  <a href="#" ng-click="sm.currentSpace.announcments.splice($index,1)" class="secondary-content"><i class="material-icons">delete</i></a>
                  <!-- <a href="#" ng-click="an.deleted = true" class="secondary-content"><i class="material-icons">delete</i></a> -->

                </div>
              </li>
            </ul>
            <div class="row" ng-repeat="announcement in sm.announcments">
              <div class="input-field col s12">
                <textarea id="textarea1" class="materialize-textarea" ng-model = "announcement.text"></textarea>
                <label for="textarea1">Announcement</label>
              </div>
            </div>
          </div>
        </div>
        <p class="input-group">
        <div class="input-group-btn">
          <div class="row">
            <a id="dropDownButton" class="waves-effect waves-light btn deep-purple" ng-click="sm.newAnnouncement()">New Announcement</a>
          </div>
          <div class="row">
            <button type="submit" class="btn btn-primary" ng-click="sm.saveSpace()">Save</button>
          </div>
        </div>
        </p>
      </form>
    </div>


<!-- Ads tab -->
    <div id="ads" class="col s12">
      <form class="thing-form">
        <div class="input-group">
          <div class="row">
            <div class="row">
              <h5>Current Advertisements</h5>
              <ul class="collection" id-"space-list" ng-hide="sm.currentSpace.ads.length === 0">
                <label class="active" for="space-list">Space Ads</label>
                <li class="collection-item avatar" ng-repeat="an in sm.currentSpace.ads">
                  <img ng-src="{{an.imgUrl}}" alt="" class="circle">
                  <span class="title">{{an.title}}</span>
                  <p>{{an.description}}</p>
                  <a href="#!" ng-click="sm.currentSpace.ads.splice($index,1)" class="secondary-content"><i class="material-icons">delete</i></a>
                </li>
              </ul>

              <ul class="collection"  id="beacon-list" ng-repeat="beacon in sm.currentBeacons" ng-hide="beacon.vicinityAds.ads.length === 0">
                <label class="active" for="beacon-list">Beacon Specific Ads: {{beacon.name}} </label>
                <li class="collection-item avatar"  ng-repeat="ad in beacon.vicinityAds.ads">

                  <img ng-src="{{ad.imgUrl}}" alt="" class="circle">
                  <span class="title">{{ad.title}}</span>
                  <p>{{ad.description}}</p>
                  <a href="#!" ng-click="beacon.vicinityAds.ads.splice($index,1)" class="secondary-content"><i class="material-icons">delete</i></a>
                </li>
              </ul>
            </div>
            <div class="row" ng-repeat="ad in sm.ads track by $index">
              <div class ="row">
                <div class="col s6">
                  <h6>Ad {{$index + 1}}</h6>
                </div>
                <div class="col s6">
                  <select class="browser-default" ng-model="ad.beacon">
                    <option value="" disabled selected>Select a beacon to add the ad to.</option>
                    <option ng-repeat="beacon in sm.currentSpace.beacons" value="{{beacon.identifier}}">{{beacon.name}}</option>
                  </select>
                    <label>This is optional. Your ad can be associated with your entire space if you do not select anything.</label>
                </div>
              </div>

              <div class="input-field col s12">
                <input id="title" type="text" class="validate" ng-model = "ad.title">
                <label for="title">Title</label>
              </div>
              <div class="input-field col s12">
                <input id="description" type="text" class="validate" ng-model = "ad.description">
                <label for="description">Description</label>
              </div>
              <div class="input-field col s12">
                <input id="imgUrl" type="text" class="validate" ng-model = "ad.imgUrl">
                <label for="imgUrl">Image URL</label>
              </div>
              <div class="input-field col s12">
                <input id="link" type="text" class="validate" ng-model = "ad.link">
                <label for="link">Link</label>
              </div>
            </div>
          </div>
        </div>
        <p class="input-group">
        <div class="input-group-btn">
          <div class="row">
            <a id="dropDownButton" class="waves-effect waves-light btn deep-purple" ng-click="sm.newAd()">New Advertisement</a>
          </div>
          <div class="row">
            <button type="submit" class="btn btn-primary" ng-click="sm.saveSpace()">Save</button>
          </div>
        </div>
        </p>
      </form>
    </div>



</div>

    <!-- Dumb hack to get material dropwdowns to work http://stackoverflow.com/questions/33894817/materialize-css-select-statement-not-showing -->
    <script>
      $(document).ready(function() {
        $('select').material_select();
      });
      $(document).ready(function(){
        $('ul.tabs').tabs();
      });
    </script>
